Q13. Create a database trigger on the Library table.
Whenever a record is updated or deleted in the Library table,
the old record values should be inserted into the Library_Audit table with operation details and a timestamp.
Database Schema
Library(Lib_ID, Book_Name, Author_Name, Price)
Library_Audit(Lib_ID, Book_Name, Author_Name, Price, Operation, Operation_Date)
Explanation:
•	When an UPDATE or DELETE operation is performed on Library,
the trigger will capture the old values (before change).
•	It will insert those old values into Library_Audit with:
o	Type of operation ('UPDATE' or 'DELETE')
o	Current system date (SYSDATE)

CODE=-
-- Step 1: Create tables
CREATE TABLE Library (
    Lib_ID INT PRIMARY KEY,
    Book_Name VARCHAR(100),
    Author_Name VARCHAR(100),
    Price DECIMAL(10,2)
);

CREATE TABLE Library_Audit (
    Lib_ID INT,
    Book_Name VARCHAR(100),
    Author_Name VARCHAR(100),
    Price DECIMAL(10,2),
    Operation VARCHAR(20),
    Operation_Date DATETIME
);

-- Step 2: Insert some sample data
INSERT INTO Library VALUES
(1, 'DBMS', 'Navathe', 500),
(2, 'Operating System', 'Galvin', 600),
(3, 'Computer Networks', 'Tanenbaum', 700);

-- Step 3: Trigger for UPDATE
DELIMITER $$

CREATE TRIGGER trg_library_update
BEFORE UPDATE ON Library
FOR EACH ROW
BEGIN
    INSERT INTO Library_Audit
    VALUES (OLD.Lib_ID, OLD.Book_Name, OLD.Author_Name, OLD.Price, 
            'UPDATE', NOW());
END $$

-- Step 4: Trigger for DELETE
CREATE TRIGGER trg_library_delete
BEFORE DELETE ON Library
FOR EACH ROW
BEGIN
    INSERT INTO Library_Audit
    VALUES (OLD.Lib_ID, OLD.Book_Name, OLD.Author_Name, OLD.Price, 
            'DELETE', NOW());
END $$

DELIMITER ;

-- Step 5: Test UPDATE
UPDATE Library 
SET Price = 550 
WHERE Lib_ID = 1;

-- Step 6: Test DELETE
DELETE FROM Library 
WHERE Lib_ID = 2;

-- Step 7: Check audit records
SELECT * FROM Library_Audit;

